<?xml version="1.0"?>

<launch>
  <param name="/use_sim_time" value="false"/>
  <arg name="rviz" default="true" />

  <include file="$(find hector_mapping)/launch/mapping_default.launch">
    <arg name="pub_map_odom_transform" value="true" />
    <arg name="scan_topic" value="/lidar/scan"/>
    <arg name="pub_odom" value="true"/>
    <arg name="map_size" value="1000"/> <!-- 500 -->
    <arg name="map_res" value="0.025"/>
    <arg name="map_start_x" value="0.5"/> <!-- 0.15 -->
    <arg name="map_start_y" value="0.5"/> <!-- 0.85 -->
  </include>

  <include file="$(find husky_navigation)/launch/move_base.launch"/>

  <node if="$(arg rviz)" pkg="rviz" type="rviz" name="rviz" 
        args="-d $(find hector_slam_launch)/rviz_cfg/nav_demo.rviz"/>

  <!-- Run the script to launch the lidar scan filter -->
  <node name="scan_filtered" pkg="laser_filters" type="apply_filter.sh" />

  <!-- Throttle nodes with high CPU usage -->
  <node name="throttle_cpu" pkg="vaultbot_irp" type="throttle_cpu.py" />

</launch>
